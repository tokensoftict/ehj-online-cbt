import{u as V,r as u,j as s,F as B}from"./app-CtAzDAef.js";import{C as M,a as J,b as R,c as $}from"./card-CnZlrcc9.js";import{B as A}from"./button-D-lROaPr.js";import{L as _}from"./label-DWKJ3nD5.js";import{T as k,a as G,b as D,c as h,d as O,e as p}from"./table-CixfBmrM.js";import z from"./createdialog-BdxWT5hU.js";import K from"./tableactions-pgJoeb5o.js";import W from"./layout-By73npNH.js";import X from"./tabnav-C_wM3AL7.js";import{q as f,a as w}from"./index-CMWG4mbA.js";import{I as y}from"./input-error-CGpKbW0q.js";import{D as Y}from"./dialog-Ckpon0xJ.js";import{S as g,a as S,b as C,c as b,d as N}from"./select-BijQGvXI.js";import{P as Z}from"./plus-D5H_Wf7d.js";import{L as ee}from"./loader-circle-CdxccnYf.js";/* empty css            */import"./index-Cj69SuXa.js";import"./floating-ui.react-dom-BBZsKlhS.js";import"./AdminLayout-BlngJDZy.js";import"./button-CaO6cyuZ.js";import"./book-open-DpMhFfWk.js";import"./users-TaYtMwUf.js";import"./log-out-C5iP-ga2.js";import"./index-CgqPNh__.js";const l=e=>({url:l.url(e),method:"get"});l.definition={methods:["get","head"],url:"/admin/student-classes"};l.url=e=>l.definition.url+f(e);l.get=e=>({url:l.url(e),method:"get"});l.head=e=>({url:l.url(e),method:"head"});const Q=e=>({action:l.url(e),method:"get"});Q.get=e=>({action:l.url(e),method:"get"});Q.head=e=>({action:l.url({[e?.mergeQuery?"mergeQuery":"query"]:{_method:"HEAD",...e?.query??e?.mergeQuery??{}}}),method:"get"});l.form=Q;const n=e=>({url:n.url(e),method:"post"});n.definition={methods:["post"],url:"/admin/student-classes"};n.url=e=>n.definition.url+f(e);n.post=e=>({url:n.url(e),method:"post"});const L=e=>({action:n.url(e),method:"post"});L.post=e=>({action:n.url(e),method:"post"});n.form=L;const r=(e,t)=>({url:r.url(e,t),method:"put"});r.definition={methods:["put","patch"],url:"/admin/student-classes/{student_class}"};r.url=(e,t)=>{(typeof e=="string"||typeof e=="number")&&(e={student_class:e}),Array.isArray(e)&&(e={student_class:e[0]}),e=w(e);const m={student_class:e.student_class};return r.definition.url.replace("{student_class}",m.student_class.toString()).replace(/\/+$/,"")+f(t)};r.put=(e,t)=>({url:r.url(e,t),method:"put"});r.patch=(e,t)=>({url:r.url(e,t),method:"patch"});const T=(e,t)=>({action:r.url(e,{[t?.mergeQuery?"mergeQuery":"query"]:{_method:"PUT",...t?.query??t?.mergeQuery??{}}}),method:"post"});T.put=(e,t)=>({action:r.url(e,{[t?.mergeQuery?"mergeQuery":"query"]:{_method:"PUT",...t?.query??t?.mergeQuery??{}}}),method:"post"});T.patch=(e,t)=>({action:r.url(e,{[t?.mergeQuery?"mergeQuery":"query"]:{_method:"PATCH",...t?.query??t?.mergeQuery??{}}}),method:"post"});r.form=T;const o=(e,t)=>({url:o.url(e,t),method:"delete"});o.definition={methods:["delete"],url:"/admin/student-classes/{student_class}"};o.url=(e,t)=>{(typeof e=="string"||typeof e=="number")&&(e={student_class:e}),Array.isArray(e)&&(e={student_class:e[0]}),e=w(e);const m={student_class:e.student_class};return o.definition.url.replace("{student_class}",m.student_class.toString()).replace(/\/+$/,"")+f(t)};o.delete=(e,t)=>({url:o.url(e,t),method:"delete"});const P=(e,t)=>({action:o.url(e,{[t?.mergeQuery?"mergeQuery":"query"]:{_method:"DELETE",...t?.query??t?.mergeQuery??{}}}),method:"post"});P.delete=(e,t)=>({action:o.url(e,{[t?.mergeQuery?"mergeQuery":"query"]:{_method:"DELETE",...t?.query??t?.mergeQuery??{}}}),method:"post"});o.form=P;const x={store:n,update:r,destroy:o};function Qe({classGroups:e,classNames:t,sections:m,student_classes:H}){const{toast:q}=V(),[a,v]=u.useState(),[F,c]=u.useState(!1),[I,E]=u.useState(x.store.form()),U=function(d){v(d)};return u.useEffect(()=>{a?.id!==void 0?(E(x.update.form({student_class:a?.id})),c(!0)):E(x.store.form())},[a]),s.jsx(W,{children:s.jsxs(s.Fragment,{children:[s.jsx(X,{active:"/admin/student-classes"}),s.jsxs(M,{children:[s.jsxs(J,{className:"flex flex-row items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(R,{children:"Student Classes"}),s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Numeric levels within groups (J SS 1 A, J SS 1B, S SS 1 Science)"})]}),s.jsxs(A,{onClick:()=>{v(void 0),c(!F)},children:[s.jsx(Z,{className:"h-4 w-4 mr-2"}),"Add Student Class"]})]}),s.jsx($,{children:s.jsxs(k,{children:[s.jsx(G,{children:s.jsxs(D,{children:[s.jsx(h,{children:"Name"}),s.jsx(h,{children:"Section"}),s.jsx(h,{children:"Group"}),s.jsx(h,{className:"text-right",children:"Actions"})]})}),s.jsx(O,{children:H.map(d=>s.jsxs(D,{children:[s.jsx(p,{className:"font-medium",children:d.class_name.name}),s.jsx(p,{className:"font-medium",children:d.class_section.name}),s.jsx(p,{className:"font-medium",children:d.class_group.name}),s.jsx(p,{className:"text-right",children:s.jsx(K,{onEdit:()=>{U(d)},deleteUrl:x.destroy.url({student_class:d.id}),onDeleteSuccess:()=>q({title:"Item Deleted",description:"Item has been deleted successfully."})})})]},d.id))})]})})]}),s.jsx(z,{title:a?.id?"Update Student Class":"Create New Student Class",open:F,setOpen:c,children:s.jsx(B,{...I,className:"space-y-6",onSuccess:()=>{q({title:"Class Management",description:"Student Class has been "+(a?.id?"updated":"created")+" successfully."}),c(!1)},children:({processing:d,errors:j})=>s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"grid gap-4 py-4",children:[s.jsxs("div",{className:"grid gap-2",children:[s.jsx(_,{htmlFor:"class_name_id",children:"Class Name"}),s.jsxs(g,{name:"class_name_id",defaultValue:a?.class_name_id?a?.class_name_id+"":"",children:[s.jsx(S,{children:s.jsx(C,{placeholder:"Select Class Name",defaultValue:""})}),s.jsx(b,{children:t.map(i=>s.jsx(N,{value:i.id.toString(),children:i.name},i.id+"_class_name"))})]}),s.jsx(y,{message:j.class_name_id})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(_,{htmlFor:"class_group_id",children:"Group Name"}),s.jsxs(g,{name:"class_group_id",defaultValue:a?.class_group_id?a?.class_group_id+"":"",children:[s.jsx(S,{children:s.jsx(C,{placeholder:"Select Class Group"})}),s.jsx(b,{children:e.map(i=>s.jsx(N,{value:i.id.toString(),children:i.name},i.id+"_group_name"))})]}),s.jsx(y,{message:j.class_group_id})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(_,{htmlFor:"class_section_id",children:"Class Section"}),s.jsxs(g,{name:"class_section_id",defaultValue:a?.class_section_id?a?.class_section_id+"":"",children:[s.jsx(S,{children:s.jsx(C,{placeholder:"Select Class Section"})}),s.jsx(b,{children:m.map(i=>s.jsx(N,{value:i.id.toString(),children:i.name},i.id+"_section_name"))})]}),s.jsx(y,{message:j.class_section_id})]})]}),s.jsx(Y,{children:s.jsxs(A,{disabled:d,type:"submit",children:[d&&s.jsx(ee,{className:"h-4 w-4 animate-spin"}),"  Save"]})})]})})})]})})}export{Qe as default};
