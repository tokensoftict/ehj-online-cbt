import{u as v,r as c,j as r,b as T,F as w}from"./app-CtAzDAef.js";import{q as i,a as N}from"./index-CMWG4mbA.js";import G from"./general_subject_layout-8NlL7Bze.js";import I from"./general_subject_management_tabnav-AOeSmdzD.js";import{C as L,a as P,b as R,c as U}from"./card-CnZlrcc9.js";import{B as Q}from"./button-D-lROaPr.js";import{L as H}from"./label-DWKJ3nD5.js";import{I as M}from"./input-DEe4e_Dc.js";import{I as B}from"./input-error-CGpKbW0q.js";import{D as $}from"./dialog-Ckpon0xJ.js";import k from"./createdialog-BdxWT5hU.js";import{E,D as O}from"./dataTables-DFG23W3P.js";import V from"./tableactions-pgJoeb5o.js";import{P as z}from"./plus-D5H_Wf7d.js";import{L as J}from"./loader-circle-CdxccnYf.js";/* empty css            */import"./AdminLayout-BlngJDZy.js";import"./button-CaO6cyuZ.js";import"./book-open-DpMhFfWk.js";import"./users-TaYtMwUf.js";import"./log-out-C5iP-ga2.js";import"./index-Cj69SuXa.js";import"./index-CgqPNh__.js";import"./floating-ui.react-dom-BBZsKlhS.js";const l=e=>({url:l.url(e),method:"get"});l.definition={methods:["get","head"],url:"/admin/general-subjects"};l.url=e=>l.definition.url+i(e);l.get=e=>({url:l.url(e),method:"get"});l.head=e=>({url:l.url(e),method:"head"});const p=e=>({action:l.url(e),method:"get"});p.get=e=>({action:l.url(e),method:"get"});p.head=e=>({action:l.url({[e?.mergeQuery?"mergeQuery":"query"]:{_method:"HEAD",...e?.query??e?.mergeQuery??{}}}),method:"get"});l.form=p;const u=e=>({url:u.url(e),method:"post"});u.definition={methods:["post"],url:"/admin/general-subjects"};u.url=e=>u.definition.url+i(e);u.post=e=>({url:u.url(e),method:"post"});const q=e=>({action:u.url(e),method:"post"});q.post=e=>({action:u.url(e),method:"post"});u.form=q;const a=(e,t)=>({url:a.url(e,t),method:"put"});a.definition={methods:["put","patch"],url:"/admin/general-subjects/{general_subject}"};a.url=(e,t)=>{(typeof e=="string"||typeof e=="number")&&(e={general_subject:e}),Array.isArray(e)&&(e={general_subject:e[0]}),e=N(e);const n={general_subject:e.general_subject};return a.definition.url.replace("{general_subject}",n.general_subject.toString()).replace(/\/+$/,"")+i(t)};a.put=(e,t)=>({url:a.url(e,t),method:"put"});a.patch=(e,t)=>({url:a.url(e,t),method:"patch"});const g=(e,t)=>({action:a.url(e,{[t?.mergeQuery?"mergeQuery":"query"]:{_method:"PUT",...t?.query??t?.mergeQuery??{}}}),method:"post"});g.put=(e,t)=>({action:a.url(e,{[t?.mergeQuery?"mergeQuery":"query"]:{_method:"PUT",...t?.query??t?.mergeQuery??{}}}),method:"post"});g.patch=(e,t)=>({action:a.url(e,{[t?.mergeQuery?"mergeQuery":"query"]:{_method:"PATCH",...t?.query??t?.mergeQuery??{}}}),method:"post"});a.form=g;const o=(e,t)=>({url:o.url(e,t),method:"delete"});o.definition={methods:["delete"],url:"/admin/general-subjects/{general_subject}"};o.url=(e,t)=>{(typeof e=="string"||typeof e=="number")&&(e={general_subject:e}),Array.isArray(e)&&(e={general_subject:e[0]}),e=N(e);const n={general_subject:e.general_subject};return o.definition.url.replace("{general_subject}",n.general_subject.toString()).replace(/\/+$/,"")+i(t)};o.delete=(e,t)=>({url:o.url(e,t),method:"delete"});const A=(e,t)=>({action:o.url(e,{[t?.mergeQuery?"mergeQuery":"query"]:{_method:"DELETE",...t?.query??t?.mergeQuery??{}}}),method:"post"});A.delete=(e,t)=>({action:o.url(e,{[t?.mergeQuery?"mergeQuery":"query"]:{_method:"DELETE",...t?.query??t?.mergeQuery??{}}}),method:"post"});o.form=A;const s=e=>({url:s.url(e),method:"get"});s.definition={methods:["get","head"],url:"/admin/general-subjects/datatable"};s.url=e=>s.definition.url+i(e);s.get=e=>({url:s.url(e),method:"get"});s.head=e=>({url:s.url(e),method:"head"});const j=e=>({action:s.url(e),method:"get"});j.get=e=>({action:s.url(e),method:"get"});j.head=e=>({action:s.url({[e?.mergeQuery?"mergeQuery":"query"]:{_method:"HEAD",...e?.query??e?.mergeQuery??{}}}),method:"get"});s.form=j;const f={store:u,update:a,destroy:o};function xe({url:e}){const{toast:t}=v();E.use(O);const n=c.useRef(null),[D,h]=c.useState(!1),[m,b]=c.useState(),[F,y]=c.useState(f.store.form()),C=function(d){b(d)};return c.useEffect(()=>{m?.id!==void 0?(y(f.update.form({general_subject:m.id})),h(!0)):y(f.store.form())},[m]),r.jsx(G,{children:r.jsxs(r.Fragment,{children:[r.jsx(I,{active:"/admin/general_subjects"}),r.jsxs(L,{className:"shadow-sm border border-gray-200",children:[r.jsxs(P,{className:"flex flex-row items-center justify-between pb-3",children:[r.jsxs("div",{children:[r.jsx(R,{className:"text-xl font-semibold",children:"General Subjects"}),r.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"All subjects offered by the school (Math, English, etc.)"})]}),r.jsxs(Q,{className:"flex items-center gap-2",onClick:()=>{b(void 0),h(!0)},children:[r.jsx(z,{className:"h-4 w-4"}),"Add Subject"]})]}),r.jsx(U,{children:r.jsx(E,{ajax:e,ref:n,className:"w-full",options:{dom:"<'dt-length-search'<'dt-length'l><'dt-search'f>>rtip",processing:!0,serverSide:!1,pageLength:10},columns:[{title:"S/N",data:"DT_RowIndex"},{title:"Name",data:"name"},{title:"Actions",data:null,orderable:!1,searchable:!1,render:function(d,x,_,K){const S=document.createElement("div");return T.createRoot(S).render(r.jsx(V,{onEdit:()=>C(_),deleteUrl:f.destroy.url({general_subject:_.id}),onDeleteSuccess:()=>{t({title:"Item Deleted",description:"Item has been deleted successfully."}),n.current?.dt().ajax.reload(null,!1)}})),S}}]})})]}),r.jsx(k,{title:m?.id?"Update Subject":"Create New Subject",open:D,setOpen:h,children:r.jsx(w,{...F,className:"space-y-6",onSuccess:()=>{t({title:"General Subjects",description:"Subject has been "+(m?.id?"updated":"created")+" successfully."}),h(!1),n.current&&n.current.dt().ajax.reload(null,!1)},children:({processing:d,errors:x})=>r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"grid gap-4",children:r.jsxs("div",{className:"grid gap-2",children:[r.jsx(H,{htmlFor:"groupName",children:"Subject Name"}),r.jsx(M,{id:"groupName",defaultValue:m?.name??"",name:"name",placeholder:"e.g., English, Math",className:"focus:ring-2 focus:ring-primary/30"},m?.id??"new"),r.jsx(B,{message:x.name})]})}),r.jsx($,{children:r.jsxs(Q,{disabled:d,type:"submit",className:"flex items-center gap-2",children:[d&&r.jsx(J,{className:"h-4 w-4 animate-spin"}),"Save"]})})]})})})]})})}export{xe as default};
