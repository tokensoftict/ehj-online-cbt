import{a as G,r as g,u as J,j as r,b as k,F as K}from"./app-CtAzDAef.js";import{q as p,a as q}from"./index-CMWG4mbA.js";import{A as W}from"./AdminLayout-BlngJDZy.js";import{I as Q}from"./input-error-CGpKbW0q.js";import{B as x}from"./badge-CSyGp7a_.js";import{B}from"./button-D-lROaPr.js";import{C as X,a as Y,b as Z,c as ee}from"./card-CnZlrcc9.js";import{D as te}from"./dialog-Ckpon0xJ.js";import{I as re}from"./input-DEe4e_Dc.js";import{L as S}from"./label-DWKJ3nD5.js";import ae from"./tableactions-pgJoeb5o.js";import{E as w,D as ne}from"./dataTables-DFG23W3P.js";import se from"./createdialog-BdxWT5hU.js";import{S as I,a as L,b as P,c as R,d as V}from"./select-BijQGvXI.js";import{P as oe}from"./plus-D5H_Wf7d.js";import{F as ie}from"./file-text-D6SXaEYg.js";import{L as ue}from"./loader-circle-CdxccnYf.js";/* empty css            */import"./button-CaO6cyuZ.js";import"./book-open-DpMhFfWk.js";import"./users-TaYtMwUf.js";import"./log-out-C5iP-ga2.js";import"./index-CgqPNh__.js";import"./index-Cj69SuXa.js";import"./floating-ui.react-dom-BBZsKlhS.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],le=G("Eye",de),o=e=>({url:o.url(e),method:"get"});o.definition={methods:["get","head"],url:"/admin/question-banks/datatable"};o.url=e=>o.definition.url+p(e);o.get=e=>({url:o.url(e),method:"get"});o.head=e=>({url:o.url(e),method:"head"});const A=e=>({action:o.url(e),method:"get"});A.get=e=>({action:o.url(e),method:"get"});A.head=e=>({action:o.url({[e?.mergeQuery?"mergeQuery":"query"]:{_method:"HEAD",...e?.query??e?.mergeQuery??{}}}),method:"get"});o.form=A;const i=(e,t)=>({url:i.url(e,t),method:"get"});i.definition={methods:["get","head"],url:"/admin/question-banks/{id}/questions-data-table"};i.url=(e,t)=>{(typeof e=="string"||typeof e=="number")&&(e={id:e}),Array.isArray(e)&&(e={id:e[0]}),e=q(e);const h={id:e.id};return i.definition.url.replace("{id}",h.id.toString()).replace(/\/+$/,"")+p(t)};i.get=(e,t)=>({url:i.url(e,t),method:"get"});i.head=(e,t)=>({url:i.url(e,t),method:"head"});const v=(e,t)=>({action:i.url(e,t),method:"get"});v.get=(e,t)=>({action:i.url(e,t),method:"get"});v.head=(e,t)=>({action:i.url(e,{[t?.mergeQuery?"mergeQuery":"query"]:{_method:"HEAD",...t?.query??t?.mergeQuery??{}}}),method:"get"});i.form=v;const u=e=>({url:u.url(e),method:"get"});u.definition={methods:["get","head"],url:"/admin/question-banks"};u.url=e=>u.definition.url+p(e);u.get=e=>({url:u.url(e),method:"get"});u.head=e=>({url:u.url(e),method:"head"});const E=e=>({action:u.url(e),method:"get"});E.get=e=>({action:u.url(e),method:"get"});E.head=e=>({action:u.url({[e?.mergeQuery?"mergeQuery":"query"]:{_method:"HEAD",...e?.query??e?.mergeQuery??{}}}),method:"get"});u.form=E;const m=e=>({url:m.url(e),method:"post"});m.definition={methods:["post"],url:"/admin/question-banks"};m.url=e=>m.definition.url+p(e);m.post=e=>({url:m.url(e),method:"post"});const H=e=>({action:m.url(e),method:"post"});H.post=e=>({action:m.url(e),method:"post"});m.form=H;const n=(e,t)=>({url:n.url(e,t),method:"get"});n.definition={methods:["get","head"],url:"/admin/question-banks/{question_bank}"};n.url=(e,t)=>{(typeof e=="string"||typeof e=="number")&&(e={question_bank:e}),Array.isArray(e)&&(e={question_bank:e[0]}),e=q(e);const h={question_bank:e.question_bank};return n.definition.url.replace("{question_bank}",h.question_bank.toString()).replace(/\/+$/,"")+p(t)};n.get=(e,t)=>({url:n.url(e,t),method:"get"});n.head=(e,t)=>({url:n.url(e,t),method:"head"});const C=(e,t)=>({action:n.url(e,t),method:"get"});C.get=(e,t)=>({action:n.url(e,t),method:"get"});C.head=(e,t)=>({action:n.url(e,{[t?.mergeQuery?"mergeQuery":"query"]:{_method:"HEAD",...t?.query??t?.mergeQuery??{}}}),method:"get"});n.form=C;const s=(e,t)=>({url:s.url(e,t),method:"put"});s.definition={methods:["put","patch"],url:"/admin/question-banks/{question_bank}"};s.url=(e,t)=>{(typeof e=="string"||typeof e=="number")&&(e={question_bank:e}),Array.isArray(e)&&(e={question_bank:e[0]}),e=q(e);const h={question_bank:e.question_bank};return s.definition.url.replace("{question_bank}",h.question_bank.toString()).replace(/\/+$/,"")+p(t)};s.put=(e,t)=>({url:s.url(e,t),method:"put"});s.patch=(e,t)=>({url:s.url(e,t),method:"patch"});const N=(e,t)=>({action:s.url(e,{[t?.mergeQuery?"mergeQuery":"query"]:{_method:"PUT",...t?.query??t?.mergeQuery??{}}}),method:"post"});N.put=(e,t)=>({action:s.url(e,{[t?.mergeQuery?"mergeQuery":"query"]:{_method:"PUT",...t?.query??t?.mergeQuery??{}}}),method:"post"});N.patch=(e,t)=>({action:s.url(e,{[t?.mergeQuery?"mergeQuery":"query"]:{_method:"PATCH",...t?.query??t?.mergeQuery??{}}}),method:"post"});s.form=N;const c=(e,t)=>({url:c.url(e,t),method:"delete"});c.definition={methods:["delete"],url:"/admin/question-banks/{question_bank}"};c.url=(e,t)=>{(typeof e=="string"||typeof e=="number")&&(e={question_bank:e}),Array.isArray(e)&&(e={question_bank:e[0]}),e=q(e);const h={question_bank:e.question_bank};return c.definition.url.replace("{question_bank}",h.question_bank.toString()).replace(/\/+$/,"")+p(t)};c.delete=(e,t)=>({url:c.url(e,t),method:"delete"});const U=(e,t)=>({action:c.url(e,{[t?.mergeQuery?"mergeQuery":"query"]:{_method:"DELETE",...t?.query??t?.mergeQuery??{}}}),method:"post"});U.delete=(e,t)=>({action:c.url(e,{[t?.mergeQuery?"mergeQuery":"query"]:{_method:"DELETE",...t?.query??t?.mergeQuery??{}}}),method:"post"});c.form=U;const _={store:m,show:n,update:s,destroy:c};function Ie({url:e,subjects:t,student_classes:h}){const b=g.useRef(null),{toast:F}=J(),[$,j]=g.useState(!1);w.use(ne);const[d,D]=g.useState(),[M,T]=g.useState(_.store.form());g.useEffect(()=>{d?.id!==void 0?(T(_.update.form({question_bank:d.id})),j(!0)):T(_.store.form())},[d]);const z=function(l){D(l)},O=l=>{switch(l){case"Active":return r.jsx(x,{className:"bg-success text-success-foreground",children:"Active"});case"Draft":return r.jsx(x,{variant:"secondary",children:"Draft"});case"Archived":return r.jsx(x,{variant:"outline",children:"Archived"});default:return r.jsx(x,{variant:"outline",children:l})}};return r.jsx(W,{children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold",children:"Question Bank"}),r.jsx("p",{className:"text-muted-foreground",children:"Manage test containers and questions"})]}),r.jsxs(B,{onClick:()=>{D(void 0),j(!0)},children:[r.jsx(oe,{className:"mr-2 h-4 w-4"}),"Create Test Container"]})]}),r.jsxs(X,{children:[r.jsx(Y,{children:r.jsxs(Z,{className:"flex items-center gap-2",children:[r.jsx(ie,{className:"h-5 w-5"}),"Test Containers"]})}),r.jsx(ee,{children:r.jsx(w,{ajax:e,ref:b,className:"w-full",options:{dom:"<'dt-length-search'<'dt-length'l><'dt-search'f>>rtip",processing:!0,serverSide:!1,pageLength:10},columns:[{title:"S/N",data:"DT_RowIndex"},{title:"Name",data:"name"},{title:"Subject",data:"subject"},{title:"Class",data:"class"},{title:"Question",data:"questions",render:(l,y,a)=>{const f=document.createElement("div");return k.createRoot(f).render(r.jsx(x,{children:a.questions})),f}},{title:"Status",data:"status",render:(l,y,a)=>{const f=document.createElement("div");return k.createRoot(f).render(O(a.status)),f}},{title:"Created",data:"created_at"},{title:"Actions",data:null,orderable:!1,searchable:!1,render:function(l,y,a){const f=document.createElement("div");return k.createRoot(f).render(r.jsx(ae,{onEdit:()=>z(a),deleteUrl:_.destroy.url({question_bank:a.id}),onDeleteSuccess:()=>{F({title:"Item Deleted",description:"Item has been deleted successfully."}),b.current?.dt().ajax.reload(null,!1)},extraActions:[{type:"link",label:"View Questions",icon:le,href:_.show.url({question_bank:a.id})}]})),f}}]})})]}),r.jsx(se,{title:"Create New Test Container",open:$,setOpen:j,children:r.jsx(K,{...M,className:"space-y-6",onSuccess:()=>{F({title:"Test Container",description:"Test Container has been "+(d?.id?"updated":"created")+" successfully."}),j(!1),b.current&&b.current.dt().ajax.reload(null,!1)},children:({processing:l,errors:y})=>r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"grid gap-4",children:r.jsxs("div",{className:"grid gap-2",children:[r.jsx(S,{htmlFor:"groupName",children:"Subject Name"}),r.jsx(re,{id:"groupName",defaultValue:d?.name??"",name:"name",placeholder:"e.g., Practice English Question",className:"focus:ring-2 focus:ring-primary/30"},d?.id??"new"),r.jsx(Q,{message:y.name})]})}),r.jsxs("div",{className:"grid gap-2",children:[r.jsx(S,{htmlFor:"student_class_id",children:"Class Name"}),r.jsxs(I,{name:"student_class_id",defaultValue:d?.student_class_id?d?.student_class_id+"":"",children:[r.jsx(L,{children:r.jsx(P,{placeholder:"Select Class Name",defaultValue:""})}),r.jsx(R,{children:h.map(a=>r.jsxs(V,{value:a.id.toString(),children:[a.class_name.name," ",a.class_section.name]},a.id+"_class_name"))})]}),r.jsx(Q,{message:y.class_name_id})]}),r.jsxs("div",{className:"grid gap-2",children:[r.jsx(S,{htmlFor:"general_subject_id",children:"Subject"}),r.jsxs(I,{name:"general_subject_id",defaultValue:d?.general_subject_id?d?.general_subject_id+"":"",children:[r.jsx(L,{children:r.jsx(P,{placeholder:"Select Subject",defaultValue:""})}),r.jsx(R,{children:t.map(a=>r.jsx(V,{value:a.id.toString(),children:a.name},a.id+"_subject"))})]}),r.jsx(Q,{message:y.general_subject_id})]}),r.jsx(te,{children:r.jsxs(B,{disabled:l,type:"submit",className:"flex items-center gap-2",children:[l&&r.jsx(ue,{className:"h-4 w-4 animate-spin"}),"Save"]})})]})})})]})})}export{Ie as default};
